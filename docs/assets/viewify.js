(function(a){var b=function(a){if(a=a||{},this.dev=a.dev||!1,this.listener=a.listener,this.percent=a.percent||0.5,this.elements=a.elements||[],this.positions=a.positions||[],this.container=a.container||document.body,this.elements.length)for(var b=0,c=this.elements.length;b<c;b++){var d=this.elements[b],e=this.position(d);this.positions.push(e)}};return b.prototype.position=function(a){var b=a.getBoundingClientRect(),c=document.documentElement.scrollTop;return{top:b.top+c,bottom:b.bottom+c}},b.prototype.dev=function(){this.changePointElement=document.createElement('div'),this.changePointElement.setAttribute('style','top: 0;left: 0;width: 100%;height: 3px;z-index: 10000;background: red;position: absolute;'),this.container.appendChild(this.changePointElement)},b.prototype.scroll=function(){var b=a.scrollY+a.innerHeight*this.percent;this.dev&&(this.changePointElement.style.top=b+'px');for(var c,d=0,e=this.positions.length;d<e;d++)if(c=this.positions[d],b>=c.top&&b<=c.bottom&&this.current!==d){this.current=d,this.listener&&this.listener(d);break}},b.prototype.listen=function(b){this.listener=this.listener||b,this.scroll(),this.animation&&a.cancelAnimationFrame(this.animation),this.scrollEvent&&a.removeEventListener(this.scrollEvent),this.resizeEvent&&a.removeEventListener(this.resizeEvent),this.animation=a.requestAnimationFrame.bind(null,this.scroll.bind(this)),this.scrollEvent=a.addEventListener('scroll',this.animation,!1),this.resizeEvent=a.addEventListener('resize',this.animation,!1)},a.Viewify=b})(this);